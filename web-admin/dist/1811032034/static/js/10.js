webpackJsonp([10],{RQCh:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n",""])},eOpx:function(t,a,e){var r=e("RQCh");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("855e2e10",r,!0)},"s/xs":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{imageUrl:"",uploadUrl:"",visible:!1,dataForm:{id:0,key:"",imgUrl:"",linkUrl:"",isShow:!0},dataRule:{imgUrl:[{required:!0,message:"图片地址不能为空",trigger:"blur"}]}}},methods:{init:function(t){var a=this;this.uploadUrl=this.$http.adornUrl("/sys/oss/upload?token="+this.$cookie.get("token")),this.dataForm.id=t||0,this.visible=!0,this.$nextTick(function(){a.$refs.dataForm.resetFields(),a.dataForm.id&&a.$http({url:a.$http.adornUrl("/support/screenAd/info/"+a.dataForm.id),method:"get",params:a.$http.adornParams()}).then(function(t){var e=t.data;e&&0===e.code&&(a.dataForm.key=e.screenAd.key,a.dataForm.imgUrl=e.screenAd.imgUrl,a.dataForm.linkUrl=e.screenAd.linkUrl,a.imageUrl=e.screenAd.imgUrl,a.dataForm.isShow=0===e.screenAd.isShow)})})},dataFormSubmit:function(){var t=this;console.info(this.dataForm.isShow),this.$refs.dataForm.validate(function(a){a&&t.$http({url:t.$http.adornUrl("/support/screenAd/"+(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,key:t.dataForm.key,imgUrl:t.dataForm.imgUrl,linkUrl:t.dataForm.linkUrl,isShow:!0===t.dataForm.isShow?0:1})}).then(function(a){var e=a.data;e&&0===e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(e.msg)})})},handleAvatarSuccess:function(t,a){this.imageUrl=URL.createObjectURL(a.raw),this.dataForm.imgUrl=t.url},beforeAvatarUpload:function(t){if("image/jpg"!==t.type&&"image/jpeg"!==t.type&&"image/png"!==t.type&&"image/gif"!==t.type)return this.$message.error("只支持jpg、png、gif格式的图片！"),!1}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(a){t.visible=a}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key))return null;t.dataFormSubmit()}}},[e("el-form-item",{attrs:{label:"图片地址",prop:"imgUrl"}},[e("el-input",{attrs:{placeholder:"图片地址",hidden:""},model:{value:t.dataForm.imgUrl,callback:function(a){t.$set(t.dataForm,"imgUrl",a)},expression:"dataForm.imgUrl"}})],1),t._v(" "),e("el-upload",{staticClass:"avatar-uploader",staticStyle:{"text-align":"center"},attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只支持jpg、png、gif格式的图片！")])]),t._v(" "),e("el-form-item",{attrs:{label:"广告链接",prop:"linkUrl"}},[e("el-input",{attrs:{placeholder:"广告链接"},model:{value:t.dataForm.linkUrl,callback:function(a){t.$set(t.dataForm,"linkUrl",a)},expression:"dataForm.linkUrl"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否显示",prop:"isShow"}},[[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.dataForm.isShow,callback:function(a){t.$set(t.dataForm,"isShow",a)},expression:"dataForm.isShow"}})]],2)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.visible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var o=e("VU/8")(r,i,!1,function(t){e("eOpx")},null,null);a.default=o.exports}});